@model website_e_commerce.Models.News
@{
    ViewData["Title"] = Model.Title;
    var related = ViewBag.Related as List<website_e_commerce.Models.News>;
}

<div class="container mt-4">
    <div class="row">
        <!-- Cột trái: Nội dung bài viết -->
        <div class="col-md-8">
            <h2 class="fw-bold mb-3">@Model.Title</h2>
            <div class="text-muted mb-3">
                <i class="bi bi-calendar3"></i>
                @Model.PublishedDate.ToString("dddd, dd/MM/yyyy") &nbsp;&nbsp;
                <i class="bi bi-person"></i>
                @Model.Author
            </div>

            <h6 class="fw-semibold">@Model.Summary</h6>
            <img src="@Model.ImageUrl" alt="@Model.Title" class="img-fluid rounded mb-3" />

            <div style="text-align: justify; line-height: 1.8;">
                @Html.Raw(Model.Content)
            </div>

            <!-- ✅ PHẦN TIN LIÊN QUAN (ĐÃ RÚT GỌN GỌN GÀNG) -->
            @if (ViewBag.Related != null && ViewBag.Related.Count > 0)
            {
                <div class="related-news mt-5">
                    <h4 class="related-title">TIN LIÊN QUAN</h4>
                    <div class="row">
                        @foreach (var item in ViewBag.Related)
                        {
                            <div class="col-md-3 mb-4">
                                <div class="card h-100 shadow-sm border-0">
                                    <div class="position-relative">
                                        <img src="@item.ImageUrl" class="card-img-top rounded" alt="@item.Title" style="height:180px; object-fit:cover;">
                                        <span class="badge bg-warning text-dark position-absolute top-0 start-0 m-2 px-2 py-1 rounded-1">
                                            @item.PublishedDate.ToString("dd/MM/yyyy")
                                        </span>
                                    </div>
                                    <div class="card-body p-3">
                                        <h6 class="card-title fw-semibold" style="font-size:15px; line-height:1.4; height:42px; overflow:hidden;">
                                            <a href="/News/Detail/@item.Id" class="text-dark text-decoration-none">
                                                @item.Title
                                            </a>
                                        </h6>
                                        <a href="/News/Detail/@item.Id" class="text-warning fw-bold small">
                                            Đọc tiếp &raquo;
                                        </a>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            }
            <!-- ✅ HẾT PHẦN TIN LIÊN QUAN -->
        </div>

        <!-- Cột phải: Sidebar -->
        <div class="col-md-4">
            <div class="card mb-3">
                <div class="card-header fw-bold bg-light">Danh mục tin tức</div>
                <div class="list-group list-group-flush">
                    <a href="#" class="list-group-item">Tin công nghệ</a>
                    <a href="#" class="list-group-item">Tin thủ thuật</a>
                    <a href="#" class="list-group-item">Chuyên mục game</a>
                </div>
            </div>

            <div class="card">
                <div class="card-header fw-bold bg-light">Tin tức nổi bật</div>
                <ul class="list-group list-group-flush">
                    @foreach (var n in related)
                    {
                        <li class="list-group-item">
                            <div class="d-flex">
                                <img src="@n.ImageUrl" width="70" height="50" class="rounded me-2" />
                                <div>
                                    <a href="/News/Detail/@n.Id" class="fw-semibold text-dark">@n.Title</a><br />
                                    <small class="text-muted">@n.PublishedDate.ToString("dd/MM")</small>
                                </div>
                            </div>
                        </li>
                    }
                </ul>
            </div>
        </div>
    </div>
</div>
